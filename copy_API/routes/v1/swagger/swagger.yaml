openapi: 3.0.0
info:
  version: '1.0.0'
  title: 'copy api'
  description: 'monitor sever, trade server, user app 과 DB 사이의 REST API'

servers:
  - description: "프로젝트 local dev server"
    url : http://127.0.0.1:3000/api
  - description : "프로젝트 원격 test server"
    url : http://124.50.247.56:3000/api
  
paths:
  /test/LT_info:
    get:
      summary : "leader trader 정보 테이블 조회 테스트"
      description : "leader trader 정보 테이블 조회 테스트용 api, 테이블 전체 json 데이터를 불러옴"
      tags:
        - Test api 
      responses:
        '200':
          description : "정상 응답, DB 정상 작동중"
          content:
            application/json:
              schema:
              type:
              itmes:
              type:
        '404':
          description : "DB 접속에러"
              

  /test/LT_history:
    get:
      summary : "leader trader 거래 정보 테이블 조회 테스트"
      description : "leader trader 거래 정보 테이블 조회 테스트용 api, 테이블 전체 json 데이터를 불러옴"
      tags:
        - Test api 
      responses:
        '200':
          description : "정상 응답, DB 정상 작동중"
          content:
            application/json:
              schema:
              type:
              itmes:
              type:
        '404':
          description : "DB 접속에러"

  /monitor/newtrade:
    post:
      summary : "monitor 서버에서 거래발생 요청시 작동"
      description : "리더 거래기록을 업데이트, 구독 정보를 조회하여 해당 리더의 구독자 정보를 트레이드서버로 시장, 거래량과 함께 전송"
      tags:
        - Monitor api
      parameters:
        - in: "body"
          name: "body"
          description: "발생 거래기록 전체"
          required: true
          schema:
            type: object
            properties:
              LEADER_SEQ:
                type: number
              HISTORY_NUM:
                type: string
              TRADE_TYPE:
                type: string
              TRADE_SYMBOL:
                type: string
              TRADE_MARKET:
                type: string
              TRADE_PRICE:
                type: string
              TRADE_VOLUME:
                type: number
              REG_DT:
                type: string

      responses:
        '200':
          description : "거래기록 정상 업데이트, 거래 수신 완료"
        '201':
          description : "거래기록 정상 업데이트, 해당 리더에게 구독자가 없음"
        '404':
          description : "해당 리더 혹은 유저를 찾을 수 없음"
          
